
- alias: 'Alarm clock: Weather notification'
  id: "alarm_clock_weather_notification"
  trigger:
    platform: template
    value_template: >
      {{ states("sensor.time")[0:5] == states("sensor.weather_notifitcations") }}
  action:
    service: telegram_bot.send_message
    data:
      message: "{% if now().strftime('%H')|int < 7 %}
        Доброй ночи,
        {% elif now().strftime('%H')|int < 12 %}
        Доброе утро,
        {% elif now().strftime('%H')|int < 18 %}
        Хорошего дня,
        {% else %}
        Хорошего вечера,
        {% endif %}
         сейчас в Санкт-Петербурге {{states('sensor.openweathermap_temperature_2')}}°C. В Волгограде {{states('sensor.openweathermap_temperature')}}°C"


- alias: "Alarm clock: Sunrise wake up"
  id: "alarm_clock_sunrise"
  trigger:
    platform: template
    value_template: >
      {{ states("sensor.time")[0:5] == states("sensor.wake_up_light_start_time") }}
  condition:
    condition: state
    entity_id: input_boolean.alarm_clock
    state: "on"
  action:
    - service: input_boolean.turn_on
      entity_id: input_boolean.wake_up_light
    - service: input_select.select_option
      entity_id: input_select.sleep_mode
      data:
        option: "off"