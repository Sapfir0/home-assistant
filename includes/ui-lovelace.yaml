title: Home
views:
  - path: default_view
    title: Home
    icon: mdi:home
    badges:
      - entity: person.alexander
      - entity: sun.sun
    cards:
      - type: custom:clock-weather-card
        entity: weather.home
        weather_icon_type: line
        animated_icon: true
        forecast_rows: 7
        locale: ru
        time_format: 24
        date_pattern: P
        hide_today_section: true
        hide_forecast_section: false
        hide_clock: true
        hide_date: true
        hourly_forecast: false
        use_browser_time: false
        card_mod:
          style:
            .: |
              ha-card {
                background: none;
                border: 0;
                --ha-card-box-shadow: 0px;
                margin: -8px -4px -4px -8px;
              }
      - type: custom:mini-media-player
        entity: media_player.kitchen_speakers
      - type: entities
        entities:
          - binary_sensor.cleargrass_air
      - type: entities
        entities:
          - entity: input_boolean.alarm_clock
          - entity: sensor.alarm_clock
          - entity: sensor.wake_up_light_start_time
          - entity: sensor.weather_notifitcations
          - entity: input_select.sleep_mode
            secondary_info: none
      - type: picture-elements
        elements:
          - type: state-badge
            entity: sensor.air_temperature
            style:
              top: 35%
              left: 15%
              scale: 85%
          - type: state-badge
            entity: sensor.air_humidity
            style:
              top: 35%
              left: 30%
              scale: 85%
        image: >-
          https://sun9-41.userapi.com/impg/ZBqlsc2qDP_hYy7xnqwhCQEXYbvwYvRA_UsNwQ/_P5IL7LPGRk.jpg?size=1406x662&quality=95&sign=8f29b2d623ae0182a0dced2b0a6e5add&type=album
      - type: markdown
        content: >-
          ## Расписание


          | Tables        | Are           |

          | ------------- |:-------------:|

          | {{ states("sensor.charging_time") }} | Включается розетка для
          зарядки всякого разного |

          | {{ states("sensor.wake_up_light_start_time") }} | Включается
          лампа-рассвет |

          | {{ states("sensor.alarm_clock") }} | Будильник, отключается режим
          сна  |

          | {{ states("sensor.weather_notifitcations") }} | Отправляется
          уведомление о погоде |

          | {{ states("input_datetime.wind_down") }} | Идет уход ко сну

      - type: entities
        entities:
          - entity: sensor.air_recomendation
          - entity: sensor.temperature_recomendation
          - entity: sensor.humidity_recomendation
      - type: media-control
        entity: media_player.yandex_station
  - title: Living room
    path: users
    icon: mdi:television
    badges: []
    cards:
      - type: entities
        entities:
          - entity: sensor.air_temperature
          - entity: sensor.air_humidity
          - entity: sensor.air_co2
          - entity: sensor.air_tvoc
          - entity: sensor.air_pm25
          - entity: sensor.air_pm10
      - type: vertical-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: toggle
            entity: light.living_room_lights
          - shorten_cards: false
            consolidate_entities: true
            child_card: false
            hide_header: false
            show_header_icon: false
            header: ""
            color_wheel: true
            persist_features: false
            brightness: true
            color_temp: true
            white_value: true
            color_picker: true
            speed: true
            intensity: true
            force_features: false
            show_slider_percent: false
            full_width_sliders: false
            brightness_icon: weather-sunny
            white_icon: file-word-box
            temperature_icon: thermometer
            speed_icon: speedometer
            intensity_icon: transit-connection-horizontal
            type: custom:light-entity-card
            entity: light.living_room_lights
            effects_list: false
      - type: entities
        entities:
          - entity: switch.adaptive_lighting_living_room
          - entity: switch.adaptive_lighting_sleep_mode_living_room
      - square: false
        type: grid
        cards:
          - graph: line
            type: sensor
            entity: sensor.air_temperature
            detail: 1
            hours_to_show: 6
          - graph: line
            type: sensor
            entity: sensor.air_humidity
            detail: 1
            hours_to_show: 6
          - graph: line
            type: sensor
            entity: sensor.air_co2
            detail: 1
            hours_to_show: 6
          - graph: line
            type: sensor
            entity: sensor.air_tvoc
            detail: 1
            hours_to_show: 6
          - type: custom:mini-graph-card
            entities:
              - sensor.air_pm10
              - sensor.air_pm25
        columns: 2
      - type: vertical-stack
        cards:
          - type: custom:mini-graph-card
            entities:
              - sensor.smart_plug_current_power
          - type: entities
            entities:
              - entity: switch.smart_plug
      - type: markdown
        content: >-

          Включить [Plex](http://127.0.0.1:32400/), сюда можно закинуть нужное
          кино, чтобы смотреть с ТВ.
        title: TV
  - title: Bedroom
    path: ""
    icon: mdi:bed-queen
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: toggle
            entity: light.bedroom_lamp
            icon: mdi:lamp
            name: Ночник
            show_state: false
          - shorten_cards: false
            consolidate_entities: false
            child_card: true
            hide_header: true
            show_header_icon: false
            header: Midesklamp1s_f86f
            color_wheel: true
            persist_features: false
            brightness: true
            color_temp: true
            white_value: true
            color_picker: true
            speed: true
            intensity: true
            force_features: false
            show_slider_percent: true
            full_width_sliders: false
            brightness_icon: weather-sunny
            white_icon: file-word-box
            temperature_icon: thermometer
            speed_icon: speedometer
            intensity_icon: transit-connection-horizontal
            smooth_color_wheel: true
            type: custom:light-entity-card
            entity: light.bedroom_lamp
            effects_list: false
  - title: Network
    path: router
    icon: mdi:access-point
    badges: []
    cards:
      - type: markdown
        content: Full router settings in http://192.168.1.1/
        title: Info
      - type: gauge
        entity: sensor.speedtest_download
        min: 0
        max: 100
      - type: entities
        entities:
          - entity: sensor.speedtest_ping
      - type: custom:mini-graph-card
        entities:
          - sensor.speedtest_download
          - sensor.speedtest_upload
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: separator
            name: UniFi
            icon: si:ubiquiti
            styles: |-
              .bubble-line {
                background: var(--ha-card-background);
                opacity: 1;
                }
          - type: entities
            show_header_toggle: false
            state_color: true
            card_mod:
              style: |
                #states > * {
                  margin: 0 !important;
                }
            entities:
              - entity: binary_sensor.connected_wan
                name: Internet Status
                secondary_info: last-changed
              - entity: binary_sensor.template_udm_internet
              - type: section
              - entity: script.update_udm_unifios
                name: Update UniFi Command Line Sensor
                secondary_info: last-triggered
              - type: section
              - type: button
                name: Devices Dashboard
                action_name: OPEN
                icon: mdi:devices
                tap_action:
                  action: url
                  url_path: http://192.168.1.1/controlPanel/devicesList
              - type: button
                name: System Settings
                action_name: OPEN
                icon: mdi:cog
                tap_action:
                  action: url
                  url_path: http://192.168.1.1/controlPanel/system
              - entity: sensor.template_udm_uptime
              - entity: sensor.template_udm_cpu_temp
              - entity: sensor.template_udm_system_temp
              - type: custom:bar-card
                entity_row: true
                unit_of_measurement: "%"
                width: 50%
                height: 2rem
                positions:
                  icon: outside
                  indicator: "off"
                  name: outside
                entities:
                  - entity: sensor.template_udm_disk
                  - entity: sensor.template_udm_cpu
                    severity:
                      - color: var(--error-color)
                        from: 85
                        to: 100
                      - color: var(--warning-color)
                        from: 70
                        to: 84
                  - entity: sensor.template_udm_mem
                    severity:
                      - color: var(--error-color)
                        from: 85
                        to: 100
                      - color: var(--warning-color)
                        from: 70
                        to: 84
              - type: section
              - entity: sensor.template_udm_availability
              - entity: sensor.template_udm_avg_latency
              - entity: sensor.template_udm_download_speed
              - entity: sensor.template_udm_upload_speed
              - entity: sensor.template_udm_lastwanip
              - type: section
              - type: custom:fold-entity-row
                card_mod:
                  style: |
                    #items {
                      padding-left: 12px !important;
                      padding-right: 12px !important;
                    }
                    #measure {
                      padding-top: 0 !important;
                    }
                    #measure > * {
                      margin: 0 !important;
                    }
                padding: 0
                head:
                  entity: sensor.unifi_gateway_wan
                  name: WAN
                entities:
                  - entity: sensor.unifi_gateway_wan_uptime
                    icon: mdi:shield-outline
                    name: Uptime
                  - entity: sensor.unifi_gateway_wan_ip
                    icon: mdi:shield-outline
                    name: IP Address
                    type: custom:multiple-entity-row
                    secondary_info:
                      entity: sensor.unifi_gateway_wan
                      attribute: isp_name
                      name: "ISP:"
                  - entity: sensor.unifi_gateway_wan
                    name: Gateways
                    type: custom:multiple-entity-row
                    show_state: false
                    secondary_info: last-changed
                    entities:
                      - attribute: num_gw
                        name: Devices
                        unit: " "
                      - attribute: num_adopted
                        name: Adopted
                        unit: " "
                      - attribute: num_disconnected
                        name: Disconnected
                        unit: " "
                      - attribute: num_pending
                        name: Pending
                        unit: " "
              - type: section
              - type: custom:fold-entity-row
                card_mod:
                  style: |
                    #items {
                      padding-left: 12px !important;
                      padding-right: 12px !important;
                    }
                    #measure {
                      padding-top: 0 !important;
                    }
                    #measure > * {
                      margin: 0 !important;
                    }
                padding: 0
                head:
                  entity: sensor.unifi_gateway_lan
                  name: LAN
                entities:
                  - entity: sensor.unifi_gateway_lan_num_user
                    name: Devices Connected
                    icon: mdi:lan
                  - entity: sensor.unifi_gateway_lan
                    name: Switches
                    type: custom:multiple-entity-row
                    show_state: false
                    secondary_info: last-changed
                    entities:
                      - attribute: num_sw
                        name: Devices
                        unit: " "
                      - attribute: num_adopted
                        name: Adopted
                        unit: " "
                      - attribute: num_disconnected
                        name: Disconnected
                        unit: " "
                      - attribute: num_pending
                        name: Pending
                        unit: " "
                  - type: section
                  - entity: sensor.unifipoller_usw_tx
                    icon: mdi:lan
                    name: Hateful8
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - entity: sensor.unifipoller_usw_tx
                        name: TX
                        unit: " "
                      - entity: sensor.unifipoller_usw_rx
                        name: RX
                        unit: " "
                  - entity: sensor.unifipoller_usw_1_tx
                    icon: mdi:lan
                    name: The Dream Police
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - entity: sensor.unifipoller_usw_1_tx
                        name: TX
                        unit: " "
                      - entity: sensor.unifipoller_usw_1_rx
                        name: RX
                        unit: " "
              - type: section
              - type: custom:fold-entity-row
                card_mod:
                  style: |
                    #items {
                      padding-left: 12px !important;
                      padding-right: 12px !important;
                    }
                    #measure {
                      padding-top: 0 !important;
                    }
                    #measure > * {
                      margin: 0 !important;
                    }
                padding: 0
                head:
                  entity: sensor.unifi_gateway_wlan
                  name: WLAN
                entities:
                  - entity: sensor.unifi_gateway_wlan
                    name: Status
                  - entity: sensor.unifi_gateway_wlan_num_user
                    name: Devices Connected
                    icon: mdi:wifi
                  - entity: sensor.unifi_gateway_wlan
                    name: Access Points
                    type: custom:multiple-entity-row
                    show_state: false
                    secondary_info: last-changed
                    entities:
                      - attribute: num_ap
                        name: Devices
                        unit: " "
                      - attribute: num_adopted
                        name: Adopted
                        unit: " "
                      - attribute: num_disconnected
                        name: Disconnected
                        unit: " "
                      - attribute: num_pending
                        name: Pending
                        unit: " "
                  - type: section
                  - entity: sensor.unifipoller_uap_tx
                    icon: mdi:wifi
                    name: The Dream Police
                    type: custom:multiple-entity-row
                    show_state: false
                    entities:
                      - entity: sensor.unifipoller_uap_tx
                        name: TX
                        unit: " "
                      - entity: sensor.unifipoller_uap_rx
                        name: RX
                        unit: " "
              - type: custom:fold-entity-row
                head:
                  type: custom:template-entity-row
                  name: Baxter WiFi
                  state: ""
                  icon: mdi:wifi-alert
                entities:
                  - entity: switch.baxter_wi_fi
                    name: WiFi Network On
                  - entity: sensor.baxter_wi_fi
                    name: Connected Clients
              - type: custom:fold-entity-row
                head:
                  type: custom:template-entity-row
                  name: IoT
                  state: ""
                  icon: mdi:wifi-alert
                entities:
                  - entity: image.baxter_wi_fi_qr_code
                    type: custom:template-entity-row
                    name: QR Code
                    state: ""
                  - entity: switch.iot
                    name: WiFi Network On
                  - entity: sensor.iot
                    name: Connected Clients
                  - entity: image.iot_qr_code
                    type: custom:template-entity-row
                    name: QR Code
                    state: ""
              - type: custom:fold-entity-row
                head:
                  type: custom:template-entity-row
                  name: Test
                  state: ""
                  icon: mdi:wifi-alert
                entities:
                  - entity: switch.test
                    name: WiFi Network On
                  - entity: sensor.test
                    name: Connected Clients
                  - entity: image.test_qr_code
                    type: custom:template-entity-row
                    name: QR Code
                    state: ""
              - type: section
              - type: custom:fold-entity-row
                card_mod:
                  style: |
                    #items {
                      padding-left: 12px !important;
                      padding-right: 12px !important;
                    }
                    #measure {
                      padding-top: 0 !important;
                    }
                    #measure > * {
                      margin: 0 !important;
                    }
                padding: 0
                head:
                  entity: sensor.unifi_gateway_vpn
                  name: VPN
                entities:
                  - entity: sensor.unifi_gateway_vpn
              - type: section
              - type: custom:fold-entity-row
                padding: 5
                head:
                  type: custom:template-entity-row
                  name: Updates
                  icon: si:ubiquiti
                  state: |
                    {{expand('group.updates_unifi')
                      |selectattr('state', 'eq', 'on')
                      | list | count }} /
                    {{expand('group.updates_unifi')
                      |selectattr('state', 'eq', 'off')
                      | list | count }}
                entities:
                  - type: custom:auto-entities
                    card:
                      type: custom:fold-entity-row
                      padding: 5
                      head:
                        type: custom:template-entity-row
                        name: Updates Available
                        icon: mdi:update
                        state: |
                          {{expand('group.updates_unifi')
                            |selectattr('state', 'eq', 'on')
                            | list | count }}
                    show_empty: true
                    sort:
                      method: friendly_name
                    filter:
                      include:
                        - group: group.updates_unifi
                          state: "on"
                          options:
                            type: custom:template-entity-row
                            name: >-
                              {{ state_attr(config.entity,
                              'friendly_name').split(':',1)[0] }}
                            state: >-
                              New: {{ state_attr(config.entity,
                              'latest_version') }}
                            secondary: >-
                              Current: {{ state_attr(config.entity,
                              'installed_version') }}
                  - type: custom:auto-entities
                    card:
                      type: custom:fold-entity-row
                      padding: 5
                      head:
                        type: custom:template-entity-row
                        name: No Updates Available
                        icon: mdi:update
                        state: |
                          {{expand('group.updates_unifi')
                            |selectattr('state', 'eq', 'off')
                            | list | count }}
                    show_empty: true
                    sort:
                      method: friendly_name
                    filter:
                      include:
                        - group: group.updates_unifi
                          state: "off"
                          options:
                            type: custom:template-entity-row
                            name: >-
                              {{ state_attr(config.entity,
                              'friendly_name').split(':',1)[0] }}
                            state: >-
                              Current: {{ state_attr(config.entity,
                              'installed_version') }}
  - title: System
    path: system
    icon: mdi:server
    badges: []
    cards:
      - type: gauge
        entity: sensor.processor_use_percent
        min: 0
        max: 100
        severity:
          green: 0
          yellow: 50
          red: 75
      - type: gauge
        entity: sensor.memory_use_percent
        min: 0
        max: 100
        severity:
          green: 0
          yellow: 50
          red: 75
      - type: gauge
        entity: sensor.disk_use_percent
        min: 0
        max: 100
        severity:
          green: 0
          yellow: 50
          red: 75
      - type: entities
        entities:
          - sensor.time_online
      - type: entities
        entities:
          - entity: binary_sensor.backups_stale
          - entity: sensor.backup_state
      - type: entities
        entities:
          - sensor.disk_free
      - type: entities
        entities:
          - entity: sensor.processor_temperature
          - entity: binary_sensor.rpi_power_status
      - type: thermostat
        entity: climate.rpi_cooling_fan_controller
